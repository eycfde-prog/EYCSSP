<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elmagazine X | Voice Press | Titanium Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { 
            --gold: #D4AF37; 
            --gold-glow: rgba(212, 175, 55, 0.4);
            --neon-blue: #00f2ff;
            --glass: rgba(255, 255, 255, 0.03); 
            --glass-border: rgba(212, 175, 55, 0.2);
            --radar-green: #00ff41;
        }

        body { 
            font-family: 'Poppins', sans-serif; 
            background: transparent; 
            color: white; 
            margin: 0; padding: 15px; 
            direction: ltr;
        }

        /* Selection Polish */
        ::selection { background: var(--gold); color: #000; }

        .magazine-container {
            max-width: 850px; 
            margin: 0 auto;
            background: rgba(10, 10, 15, 0.92); 
            border: 1px solid var(--glass-border);
            border-radius: 25px; 
            padding: 35px; 
            backdrop-filter: blur(20px);
            box-shadow: 0 25px 60px rgba(0,0,0,0.6);
            animation: fadeInScale 0.6s ease-out;
            position: relative;
        }

        @keyframes fadeInScale { 
            from { opacity: 0; transform: scale(0.95); } 
            to { opacity: 1; transform: scale(1); } 
        }

        .header-m { 
            text-align: left; 
            border-bottom: 1px solid var(--glass-border); 
            margin-bottom: 30px; padding-bottom: 20px;
            display: flex; justify-content: space-between; align-items: center;
        }

        .header-m h1 { font-family: 'Orbitron'; color: var(--gold); letter-spacing: 4px; margin: 0; font-size: 1.4rem; }
        .issue-tag { font-family: 'Orbitron'; font-size: 11px; color: #888; border: 1px solid #444; padding: 3px 10px; border-radius: 4px; }

        .article-box {
            background: rgba(255,255,255,0.01); 
            border-radius: 15px; 
            padding: 35px;
            line-height: 1.9; 
            font-size: 1.1rem; 
            color: #ccc; 
            position: relative;
            text-align: justify; 
            border: 1px solid rgba(212, 175, 55, 0.1);
            box-shadow: inset 0 0 40px rgba(0,0,0,0.4);
        }

        .drop-cap::first-letter {
            font-family: 'Orbitron';
            font-size: 4rem;
            color: var(--gold);
            float: left;
            margin-right: 15px;
            line-height: 0.85;
            text-shadow: 0 0 20px var(--gold-glow);
            font-weight: 700;
        }

        .copy-btn {
            position: absolute; top: -18px; right: 30px;
            background: var(--gold); color: black; border: none;
            padding: 8px 25px; border-radius: 4px; cursor: pointer;
            font-family: 'Orbitron'; font-size: 10px; font-weight: bold;
            transition: 0.3s; box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            z-index: 10;
        }
        .copy-btn:hover { background: #fff; transform: translateY(-2px); }

        /* Upload Zone & Radar FX */
        .upload-zone {
            margin-top: 40px; 
            padding: 30px; 
            border: 1px dashed var(--neon-blue);
            background: rgba(0, 242, 255, 0.03);
            border-radius: 15px; 
            text-align: center; 
            transition: 0.4s;
            position: relative;
        }
        .upload-zone.active { 
            border: 1px solid var(--gold); 
            background: rgba(212, 175, 55, 0.08); 
            box-shadow: 0 0 20px var(--gold-glow);
        }

        .audio-icon { 
            font-size: 30px; color: var(--neon-blue); margin-bottom: 15px; 
            display: inline-block; position: relative;
        }

        /* Radar Pulse Animation */
        .upload-zone.active .audio-icon::after {
            content: "";
            position: absolute; top: 50%; left: 50%;
            width: 100%; height: 100%;
            border: 2px solid var(--radar-green);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: radarPulse 1.5s infinite;
        }

        @keyframes radarPulse {
            0% { width: 30px; height: 30px; opacity: 1; }
            100% { width: 80px; height: 80px; opacity: 0; }
        }

        /* Loading Overlay */
        #loadingOverlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none; flex-direction: column;
            justify-content: center; align-items: center;
            border-radius: 25px; z-index: 100;
            font-family: 'Orbitron'; color: var(--gold);
        }

        .spinner {
            width: 40px; height: 40px;
            border: 3px solid rgba(212,175,55,0.1);
            border-top: 3px solid var(--gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .error-msg { color: #ff4444 !important; animation: shake 0.4s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    </style>
</head>
<body>

    <div class="magazine-container">
        <div id="loadingOverlay">
            <div class="spinner"></div>
            <div style="font-size: 12px; letter-spacing: 2px;">ENCRYPTING SIGNAL...</div>
        </div>

        <div class="header-m">
            <div>
                <h1 id="m-title">ELMAGAZINE X</h1>
                <p style="color: #555; font-size: 10px; margin: 5px 0 0 0; font-family: 'Orbitron';">VOICE PRESS PROTOCOL</p>
            </div>
            <span class="issue-tag" id="issue-display">ISSUE #01</span>
        </div>

        <div class="article-box">
            <button class="copy-btn" onclick="copyArticle()">COPY SCRIPT</button>
            <div id="article-content" class="drop-cap">
                Establishing uplink to press center...
            </div>
        </div>

        <div class="upload-zone" id="dropZone">
            <span class="audio-icon" id="icon">üéôÔ∏è</span>
            <label class="upload-label" style="display:block; font-family:'Orbitron'; color:var(--neon-blue); font-size:11px; letter-spacing:2px; margin-bottom:15px;">TRANSMIT VOICE REPORT (MAX 10MB)</label>
            <input type="file" id="audioFile" accept="audio/*" onchange="handleFileSelect()" style="color:#888; font-family:'Poppins'; font-size:13px; cursor:pointer;">
            <div id="status" style="margin-top:20px; font-size:11px; color:var(--gold); display:none; font-family:'Orbitron'; letter-spacing:2px;">SIGNAL READY</div>
        </div>
    </div>

<script>
    const magazineData = {
        "1": "The concept of artificial intelligence has transformed from science fiction into an everyday reality. Today, AI systems help us navigate traffic, suggest movies, and even translate languages in real-time. However, the true power of AI lies in its ability to analyze massive amounts of data to solve complex problems, such as predicting climate changes or discovering new medical treatments. While some people fear that machines might replace human workers, many experts believe that AI will actually act as a powerful tool to enhance human creativity. By handling repetitive and boring tasks, AI allows us to focus on more meaningful work that requires emotional intelligence and critical thinking. As we move forward, the challenge will be to ensure that these technologies are developed ethically and used for the benefit of everyone in society, creating a balanced future.",
        // ... (ŸäŸÖŸÉŸÜ ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÇŸäÿ© ÿßŸÑŸÄ Issues ŸáŸÜÿß)
    };

    const urlParams = new URLSearchParams(window.location.search);
    const taskNum = urlParams.get('task') || "1";

    function initMagazine() {
        const content = magazineData[taskNum] || magazineData["1"];
        document.getElementById('article-content').innerText = content;
        document.getElementById('issue-display').innerText = `ISSUE #${taskNum.padStart(2, '0')}`;
    }

    function copyArticle() {
        const text = document.getElementById('article-content').innerText;
        navigator.clipboard.writeText(text).then(() => {
            const btn = document.querySelector('.copy-btn');
            btn.innerText = "COPIED!";
            setTimeout(() => { btn.innerText = "COPY SCRIPT"; }, 2000);
        });
    }

    function handleFileSelect() {
        const fileInput = document.getElementById('audioFile');
        const status = document.getElementById('status');
        const zone = document.getElementById('dropZone');
        const icon = document.getElementById('icon');

        if(fileInput.files.length > 0) {
            const file = fileInput.files[0];
            
            // Audio Validation (Max 10MB)
            if (file.size > 10 * 1024 * 1024) {
                status.innerText = "SIGNAL OVERLOAD: COMPRESS AUDIO";
                status.classList.add('error-msg');
                status.style.display = 'block';
                fileInput.value = ""; // Clear file
                zone.classList.remove('active');
                return;
            }

            status.innerText = "VOICE EVIDENCE SECURED";
            status.classList.remove('error-msg');
            status.style.display = 'block';
            zone.classList.add('active');
            icon.innerText = "üì°";
        }
    }

    window.addEventListener('message', function(event) {
        if (event.data.type === 'REQUEST_MISSION_DATA') {
            collectAndSubmit();
        }
    });

    function collectAndSubmit() {
        const fileInput = document.getElementById('audioFile');
        const loading = document.getElementById('loadingOverlay');
        
        if (fileInput.files.length === 0) {
            window.parent.postMessage({ type: 'MISSION_INCOMPLETE' }, '*');
            return;
        }

        // Show Loading Overlay
        loading.style.display = 'flex';

        const file = fileInput.files[0];
        const reader = new FileReader();

        reader.onload = function(e) {
            window.parent.postMessage({ 
                type: 'MISSION_ANSWERS', 
                activityCode: 'ELX',
                answers: e.target.result, 
                missionNum: taskNum 
            }, '*');
            
            // Hide loading after a slight delay to ensure message sent
            setTimeout(() => { loading.style.display = 'none'; }, 1000);
        };

        reader.readAsDataURL(file);
    }

    window.onload = initMagazine;
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GX | Word Extractor | Titanium Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #D4AF37;
            --gold-glow: rgba(212, 175, 55, 0.4);
            --glass: rgba(10, 10, 15, 0.9);
            --glass-border: rgba(212, 175, 55, 0.25);
            --error-red: #ff4444;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: transparent;
            color: #fff;
            margin: 0; padding: 15px;
            direction: ltr;
        }

        .header-gx {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; border-bottom: 1px solid var(--glass-border);
            padding-bottom: 15px;
        }

        .header-gx h1 {
            font-family: 'Orbitron'; font-size: 1.1rem;
            color: var(--gold); letter-spacing: 4px; margin: 0;
            text-transform: uppercase;
        }

        .passage-box {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            padding: 22px; border-radius: 20px;
            margin-bottom: 25px; line-height: 1.8;
            font-size: 1rem; color: #f0f0f0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border-left: 5px solid var(--gold);
            text-align: justify;
        }

        .extractor-grid {
            display: grid; grid-template-columns: 1fr; gap: 18px;
        }

        .extraction-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            padding: 18px; border-radius: 15px;
            transition: 0.3s;
        }

        .extraction-card label {
            display: block; font-family: 'Orbitron'; font-size: 10px;
            color: var(--gold); margin-bottom: 12px;
            letter-spacing: 2px;
        }

        .inputs-container {
            display: flex; flex-wrap: wrap; gap: 10px;
        }

        .gx-input {
            flex: 1; min-width: 140px;
            background: rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 8px;
            color: #fff; padding: 10px 14px;
            font-family: 'Poppins'; font-size: 0.9rem;
            outline: none; transition: 0.3s;
        }

        .gx-input:focus { 
            border-color: var(--gold); 
            background: rgba(212, 175, 55, 0.05);
            box-shadow: 0 0 10px var(--gold-glow);
        }

        .error-card { border-color: var(--error-red) !important; animation: shake 0.4s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-6px); }
            75% { transform: translateX(6px); }
        }
    </style>
</head>
<body>

<div class="gx-container">
    <div class="header-gx">
        <h1 id="task-title">Grammar Extractor</h1>
        <div class="principle-tags"><span style="font-family:'Orbitron'; font-size:8px; color:var(--gold); border:1px solid var(--glass-border); padding:2px 6px; border-radius:4px;">LEXICAL ANALYSIS</span></div>
    </div>

    <div class="passage-box" id="passage-content">Loading Mission Data...</div>
    <div class="extractor-grid" id="extractor-fields"></div>
</div>

<script>
const gxData = {
    "1": {
        passage: "The modern world is changing rapidly due to advanced technology. Scientists are working tirelessly to discover new solutions for global warming. Yesterday, a team of researchers announced a breakthrough in renewable energy. They found that solar panels can now store energy more efficiently. This discovery will help many countries reduce their carbon footprint. Small communities are already using this technology to power their homes. We must protect our environment because nature is very fragile. People should plant more trees and recycle plastic waste to save the planet. Education plays a vital role in raising awareness about these important environmental issues.",
        requirements: [
            { label: "Extract 5 Nouns", count: 5 },
            { label: "Extract 5 Verbs", count: 5 },
            { label: "Extract 5 Adjectives", count: 5 },
            { label: "Extract 5 Adverbs", count: 5 },
            { label: "Extract 5 Prepositions", count: 5 }
        ]
    },
    "2": {
        passage: "Exploring the deep ocean is a challenging task for marine biologists. They often use robotic submarines to reach the darkest parts of the sea. These machines can record high-quality videos and collect samples from the sandy floor. Last month, explorers discovered a strange creature that looked like a glowing umbrella. It was swimming slowly through the cold water. Biologists believe that many undiscovered species live in these extreme conditions. Science is fascinating because it constantly reveals the secrets of our mysterious world. We need to support ocean research to understand how marine life affects the entire global ecosystem and climate patterns.",
        requirements: [
            { label: "Extract 5 Plural Nouns", count: 5 },
            { label: "Extract 5 Present Participles (ing)", count: 5 },
            { label: "Extract 5 Descriptive Adjectives", count: 5 },
            { label: "Extract 5 Past Tense Verbs", count: 5 },
            { label: "Extract 5 Pronouns", count: 5 }
        ]
    },
    "3": {
        passage: "The digital revolution has transformed how students learn in schools today. Many teachers use interactive whiteboards to explain complex lessons clearly. Students can access vast amounts of information on the internet within seconds. However, they must learn how to identify reliable sources of knowledge. Digital literacy is an essential skill in the twenty-first century. In the past, children spent hours in libraries searching for books. Now, they can download digital versions of any textbook. This transition has made education more accessible and flexible for everyone. Technology is a powerful tool, but it should be used wisely to ensure a better future for the next generation.",
        requirements: [
            { label: "Extract 5 Abstract Nouns", count: 5 },
            { label: "Extract 5 Auxiliary/Modal Verbs", count: 5 },
            { label: "Extract 5 Compound Words", count: 5 },
            { label: "Extract 5 Adverbs of Manner", count: 5 },
            { label: "Extract 5 Conjunctions", count: 5 }
        ]
    },
    "4": {
        passage: "Health and nutrition are vital for maintaining a strong and active body. Doctors recommend eating a balanced diet that includes fresh vegetables, fruits, and whole grains. You should avoid consuming too much sugar or processed food because they can cause health problems. Regular exercise is also important for mental well-being. Walking daily for thirty minutes can significantly improve your heart health. Many people enjoy jogging in the park or swimming in the local pool. When you feel tired, you should rest and drink plenty of water. Sleeping well at night helps your brain function better during the day. Healthy habits lead to a long and happy life.",
        requirements: [
            { label: "Extract 5 Uncountable Nouns", count: 5 },
            { label: "Extract 5 Gerunds", count: 5 },
            { label: "Extract 5 Adjectives of Quality", count: 5 },
            { label: "Extract 5 Simple Present Verbs", count: 5 },
            { label: "Extract 5 Articles/Determiners", count: 5 }
        ]
    },
    "5": {
        passage: "The Great Pyramid of Giza is one of the most magnificent structures in the world. Ancient Egyptians built this massive monument thousands of years ago using heavy limestone blocks. Engineers today still wonder how workers moved such giant stones without modern machinery. The pyramid was originally covered in smooth white casing stones that reflected the sunlight brilliantly. Inside, there are narrow passages and large chambers. Archeologists have explored these rooms to find treasures and historical artifacts. Visiting Egypt is a dream for many travelers who want to see these ancient wonders. History teaches us about the achievements of past civilizations and helps us appreciate our cultural heritage deeply.",
        requirements: [
            { label: "Extract 5 Proper Nouns", count: 5 },
            { label: "Extract 5 Past Participles", count: 5 },
            { label: "Extract 5 Quantitative Adjectives", count: 5 },
            { label: "Extract 5 Spatial Prepositions", count: 5 },
            { label: "Extract 5 Action Verbs", count: 5 }
        ]
    },
    "6": {
        passage: "Space exploration has always been a dream for humanity since ancient times. Astronauts travel to the International Space Station to conduct scientific experiments in zero gravity. They study how plants grow in space and how the human body reacts to long missions. In the future, humans might build colonies on Mars or the Moon. This requires advanced rockets and sustainable life-support systems. Private companies are now competing to make space travel more affordable for tourists. Looking at the stars at night makes us realize how small our planet is in the vast universe. We must continue exploring the cosmos to find answers to our biggest scientific questions.",
        requirements: [
            { label: "Extract 5 Scientific Nouns", count: 5 },
            { label: "Extract 5 Future/Modal Forms", count: 5 },
            { label: "Extract 5 Adverbs of Time", count: 5 },
            { label: "Extract 5 Comparison Adjectives", count: 5 },
            { label: "Extract 5 Infinitives (to + verb)", count: 5 }
        ]
    },
    "7": {
        passage: "A successful business requires careful planning and a dedicated team of employees. Managers must communicate effectively with their staff to achieve common goals. Every employee should have a specific role and clear responsibilities within the organization. Innovation is the key to staying ahead of the competition in the global market. Companies often invest a lot of money in research and development to create new products. Customer satisfaction is the highest priority for any growing brand. When customers are happy, they will return and recommend the service to others. Leadership involves making difficult decisions and inspiring others to perform their best. Hard work and persistence always lead to great professional success.",
        requirements: [
            { label: "Extract 5 Business Nouns", count: 5 },
            { label: "Extract 5 Adverbs of Degree/Manner", count: 5 },
            { label: "Extract 5 Possessive Adjectives", count: 5 },
            { label: "Extract 5 Stative Verbs", count: 5 },
            { label: "Extract 5 Transition Words", count: 5 }
        ]
    },
    "8": {
        passage: "The tropical rainforest is home to a diverse range of exotic animals and colorful plants. Jaguars prowl silently through the dense undergrowth searching for prey. Bright parrots fly high above the green canopy while monkeys swing from the long vines. The weather is usually hot and humid with frequent heavy rain showers. These forests are often called the lungs of the planet because they produce a lot of oxygen. Unfortunately, deforestation is threatening these beautiful ecosystems. We need to protect the rainforests to preserve biodiversity and fight climate change. Many unique species might disappear forever if we do not take immediate action to stop the destruction of their natural habitat.",
        requirements: [
            { label: "Extract 5 Animal/Plant Nouns", count: 5 },
            { label: "Extract 5 Adjectives of Color/Size", count: 5 },
            { label: "Extract 5 Dynamic Verbs", count: 5 },
            { label: "Extract 5 Negative Words/Contractions", count: 5 },
            { label: "Extract 5 Descriptive Adverbs", count: 5 }
        ]
    },
    "9": {
        passage: "Music is a universal language that connects people from different cultures and backgrounds. Whether it is classical, jazz, or pop, music has the power to evoke strong emotions. Many people play musical instruments like the piano, guitar, or violin to express their feelings creatively. Attending a live concert is an exciting experience that creates lasting memories. Composers spend many months writing beautiful melodies and complex harmonies. Listening to calm music can help reduce stress and improve concentration during work. In contrast, upbeat music can provide energy and motivation during exercise. Music education is important for children because it enhances their cognitive development and social skills. Every culture has its unique musical traditions.",
        requirements: [
            { label: "Extract 5 Musical Nouns", count: 5 },
            { label: "Extract 5 Adjectives of Feeling", count: 5 },
            { label: "Extract 5 Transitive Verbs", count: 5 },
            { label: "Extract 5 Correlative/Subordinating Conjunctions", count: 5 },
            { label: "Extract 5 Quantifiers", count: 5 }
        ]
    },
    "10": {
        passage: "The Olympic Games are the world's biggest sporting event, held every four years. Athletes from hundreds of nations compete in various sports to win gold, silver, and bronze medals. Training for the Olympics requires incredible discipline, physical strength, and mental toughness. Many runners, swimmers, and gymnasts dedicate their entire lives to reaching this level of excellence. The opening ceremony is a spectacular display of culture and international unity. During the games, people all around the globe watch the competitions on television or online. The spirit of the Olympics is about friendship, respect, and fair play. Winning a medal is a proud moment for any athlete and their country. Sports bring people together and celebrate human potential.",
        requirements: [
            { label: "Extract 5 Sports Nouns", count: 5 },
            { label: "Extract 5 Ordinal/Cardinal Numbers", count: 5 },
            { label: "Extract 5 Abstract Quality Nouns", count: 5 },
            { label: "Extract 5 Helping/Linking Verbs", count: 5 },
            { label: "Extract 5 Adjectives of Nationality/Origin", count: 5 }
        ]
    }
};

    const urlParams = new URLSearchParams(window.location.search);
    const taskNum = urlParams.get('task') || "1";

    function loadExtractor() {
        const data = gxData[taskNum] || gxData["1"];
        document.getElementById('passage-content').innerText = data.passage;
        document.getElementById('task-title').innerText = `GX: SCAN ${taskNum.padStart(2, '0')}`;
        
        const grid = document.getElementById('extractor-fields');
        grid.innerHTML = data.requirements.map((req, i) => {
            let inputsHtml = '';
            for(let j=0; j < req.count; j++) {
                inputsHtml += `<input type="text" class="gx-input" data-group="${i}" placeholder="Target ${j+1}..." autocomplete="off">`;
            }
            return `
                <div class="extraction-card" id="card-${i}">
                    <label>DATA_CORE_0${i+1}: ${req.label}</label>
                    <div class="inputs-container">${inputsHtml}</div>
                </div>
            `;
        }).join('');
    }

    window.addEventListener('message', function(event) {
        if (event.data.type === 'REQUEST_MISSION_DATA') {
            collectAndSend();
        }
    });

    function collectAndSend() {
        const cards = document.querySelectorAll('.extraction-card');
        let answersArray = [];
        let hasError = false;

        cards.forEach((card) => {
            const inputs = card.querySelectorAll('.gx-input');
            let groupAnswers = [];
            let groupEmpty = false;

            inputs.forEach(input => {
                const val = input.value.trim();
                if(!val) groupEmpty = true;
                groupAnswers.push(val);
            });

            if(groupEmpty) {
                hasError = true;
                card.classList.add('error-card');
                setTimeout(() => card.classList.remove('error-card'), 500);
            } else {
                answersArray.push(groupAnswers.join(' ')); 
            }
        });

        if(hasError) {
            window.parent.postMessage({ type: 'MISSION_INCOMPLETE' }, '*');
            return;
        }

        window.parent.postMessage({ 
            type: 'MISSION_ANSWERS', 
            activityCode: 'GX',
            answers: answersArray.join('|'), 
            missionNum: taskNum
        }, '*');
    }

    window.onload = loadExtractor;
</script>
</body>
</html>

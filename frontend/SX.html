<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Seeds X | Gear Optimized Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --neon-purple: #bc13fe; 
            --neon-blue: #00f2ff; 
            --glitch-red: #ff003c;
            --glass-bg: rgba(10, 10, 20, 0.9); 
        }
        
        body { 
            font-family: 'Rajdhani', sans-serif; 
            background: transparent; 
            color: white; 
            margin: 0; 
            padding: 15px; 
            direction: ltr;
            padding-bottom: 100px; /* مساحة للعداد العائم */
        }

        .mission-header {
            text-align: center; 
            margin-bottom: 20px;
            border: 1px solid rgba(188, 19, 254, 0.2);
            background: linear-gradient(to right, transparent, rgba(188, 19, 254, 0.1), transparent);
            padding: 10px;
            border-radius: 12px;
        }

        .mission-header h1 { font-family: 'Orbitron'; font-size: 0.9rem; color: var(--neon-purple); margin:0; }

        .sentences-grid {
            display: grid; 
            grid-template-columns: 1fr; /* عمود واحد للموبايل لسهولة القراءة */
            gap: 10px; 
            margin-bottom: 20px;
        }

        .sentence-card {
            background: var(--glass-bg); 
            border: 1px solid rgba(255,255,255,0.05);
            padding: 12px; 
            border-radius: 10px; 
            font-size: 0.85rem;
            border-left: 3px solid var(--neon-blue); 
            backdrop-filter: blur(10px);
        }

        .sentence-card.glitch-seed { border-left-color: var(--glitch-red); background: rgba(255, 0, 60, 0.05); }

        .sentence-card span { 
            font-family: 'Orbitron'; 
            color: var(--neon-purple); 
            font-size: 8px; 
            display: block; 
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        textarea {
            width: 100%; 
            height: 350px; 
            background: rgba(0,0,0,0.5); 
            border: 1px solid rgba(188, 19, 254, 0.3);
            color: #e0e0e0; 
            font-family: 'Rajdhani'; 
            font-size: 1.1rem;
            line-height: 1.6; 
            outline: none; 
            resize: none; 
            box-sizing: border-box;
            border-radius: 15px;
            padding: 18px;
            transition: 0.3s;
        }

        textarea:focus { border-color: var(--neon-blue); }

        /* العداد العائم (Floating Circle) */
        .floating-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 65px;
            height: 65px;
            background: var(--glass-bg);
            border: 2px solid var(--neon-blue);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.3);
            z-index: 9999;
            pointer-events: none;
            transition: 0.3s;
        }

        .floating-counter .num {
            font-family: 'Orbitron';
            font-size: 1rem;
            font-weight: bold;
            color: var(--neon-blue);
        }

        .floating-counter .label {
            font-size: 0.5rem;
            color: #888;
            text-transform: uppercase;
        }

        .floating-counter.ready {
            border-color: #00ff88;
            box-shadow: 0 0 25px rgba(0, 255, 136, 0.5);
        }
        
        .floating-counter.ready .num { color: #00ff88; }

        /* إخفاء زر الإرسال الداخلي */
        .btn-submit { display: none; }

    </style>
</head>
<body>

    <div class="mission-header">
        <h1 id="x-title">SEEDS-X PROTOCOL</h1>
    </div>

    <div id="sentences-area" class="sentences-grid"></div>

    <div class="writing-zone">
        <textarea id="storyInput" placeholder="Integrate all protocols into your narrative matrix... (150+ words required)" oninput="updateCount()"></textarea>
    </div>

    <div class="floating-counter" id="counter-circle">
        <span class="num" id="count-num">0</span>
        <span class="label">Words</span>
    </div>

<script>
    const seedsXData = {
        "1": ["The stars were closer than ever.", "Oxygen levels were dropping fast.", "The alien planet looked like crystal.", "We landed the ship on a giant crater.", "Communication with Earth was lost.", "Someone was frying onions in the cockpit."],
        "2": ["The pyramid hid a secret chamber.", "Ancient symbols covered every wall.", "The pharaoh's crown began to glow.", "A trap door opened under my feet.", "We discovered a map made of gold.", "My smartphone started an automatic software update."],
        "3": ["The rainforest was dark and loud.", "A rare jaguar watched from the trees.", "The river was rising after the storm.", "We followed the path to the hidden cave.", "Nature has its own mysterious language.", "A clown on a unicycle appeared in the bushes."],
        "4": ["The submarine reached the ocean floor.", "Bioluminescent fish lit up the dark.", "Pressure was increasing on the glass.", "We found a shipwreck from 1912.", "Giant squids moved silently nearby.", "The captain insisted on wearing a silk tuxedo."],
        "5": ["Robots were running the entire city.", "Flying cars filled the neon sky.", "AI controlled every human decision.", "Computers were faster than human brains.", "Reality was just a digital simulation.", "A lonely cow was grazing on the motherboard."],
        "6": ["The sun was burning the endless sand.", "Water was more valuable than gold.", "The caravan moved slowly through heat.", "Wind carved shapes into the dunes.", "We found an ancient dry well.", "I decided to build a massive snowman."],
        "7": ["The emergency room was very busy.", "Doctors worked through the long night.", "The patient made a full recovery.", "Medicine saved many lives today.", "The lab results were finally ready.", "A talking dragon was waiting in the pharmacy."],
        "8": ["The detective found a silver hair.", "The suspect vanished into the night.", "Police sirens echoed in the street.", "Every clue led to the same house.", "The truth was hidden in the files.", "He scored a goal from the halfway line."],
        "9": ["The teacher opened the old textbook.", "Students were focused on the exam.", "The library was silent and peaceful.", "Knowledge is the key to the future.", "The bell rang for the final break.", "The principal started eating popcorn in 3D glasses."],
        "10": ["The bride looked stunning in white.", "Music filled the decorated hall.", "Family members gathered from afar.", "The cake was five layers high.", "They promised to stay together forever.", "The soldiers began the midnight invasion."]
    };

    const urlParams = new URLSearchParams(window.location.search);
    const taskNum = urlParams.get('task') || "1";

    function loadSeedsX() {
        const sentences = seedsXData[taskNum] || seedsXData["1"];
        const area = document.getElementById('sentences-area');
        area.innerHTML = sentences.map((s, i) => `
            <div class="sentence-card ${i === 5 ? 'glitch-seed' : ''}">
                <span>PROTOCOL_0${i+1}</span>
                ${s}
            </div>
        `).join('');
        document.getElementById('x-title').innerText = `SEEDS-X: MISSION ${taskNum.padStart(2, '0')}`;
    }

    function updateCount() {
        const text = document.getElementById('storyInput').value.trim();
        const count = text ? text.split(/\s+/).length : 0;
        
        const countNum = document.getElementById('count-num');
        const circle = document.getElementById('counter-circle');
        
        countNum.innerText = count;
        
        if(count >= 150) {
            circle.classList.add('ready');
        } else {
            circle.classList.remove('ready');
        }
    }

    function submitMission() {
        const story = document.getElementById('storyInput').value.trim();
        const count = story ? story.split(/\s+/).length : 0;

        if(count < 150) {
            alert("❌ HQ: Depth insufficient. Minimum 150 words required.");
            return;
        }

        window.parent.postMessage({ 
            type: 'MISSION_ANSWERS', 
            activityCode: 'SX',
            answers: story, 
            missionNum: taskNum 
        }, '*');
    }

    window.addEventListener('message', function(event) {
        if (event.data.type === 'REQUEST_MISSION_DATA') {
            submitMission();
        }
    });

    window.onload = loadSeedsX;
</script>
</body>
</html>
